# Проект: Микро веб-приложение с парсером данных GitHub

Это веб-приложение с использованием FastAPI, которое парсит данные с GitHub и предоставляет API для работы с репозиториями. Приложение включает два эндпоинта и парсинг данных в PostgreSQL.

### Описание приложения

#### 1. API-приложение на FastAPI с Docker
Приложение разворачивается с помощью Docker и Docker Compose. Оно включает два эндпоинта:

- **GET /api/repos/top100**  
  Возвращает топ 100 публичных репозиториев на GitHub, отсортированных по количеству звезд (stars). В ответе содержатся следующие поля:
  - `repo`: название репозитория
  - `owner`: владелец репозитория
  - `position_cur`: текущая позиция в топе
  - `position_prev`: предыдущая позиция
  - `stars`: количество звезд
  - `watchers`: количество просмотров
  - `forks`: количество форков
  - `open_issues`: количество открытых issues
  - `language`: язык репозитория

- **GET /api/repos/{owner}/{repo}/activity**  
  Информация об активности репозитория по коммитам за выбранный промежуток времени. Параметры запроса:
  - `since`: дата начала (формат: YYYY-MM-DD)
  - `until`: дата конца (формат: YYYY-MM-DD)

  Ответ содержит:
  - `date`: дата
  - `commits`: количество коммитов за день
  - `authors`: список авторов коммитов

#### 2. Парсер данных с GitHub
Приложение периодически (каждые 6 часов) парсит данные о публичных репозиториях с GitHub и сохраняет их в PostgreSQL. Данные для топ-100 репозиториев и активности сохраняются в двух таблицах:
- `top100` — информация о репозиториях
- `activity` — активность по коммитам

#### 3. Используемые технологии:
- **FastAPI** — для создания RESTful API
- **PostgreSQL** — для хранения данных
- **Docker** — для контейнеризации приложения
- **Yandex Cloud** — для создания клауд-функции для периодического парсинга

---

### Запуск проекта

1. **Клонирование репозитория**
   Склонируйте репозиторий с GitHub:
   ```bash
   git clone https://github.com/ваш-репозиторий.git
   cd ваш-репозиторий
   ```

2. **Создание Docker контейнера**
   Убедитесь, что у вас установлен Docker и Docker Compose. Для создания и запуска приложения выполните следующие команды:
   ```bash
   docker-compose build
   docker-compose up
   ```

   Это создаст и запустит контейнеры для FastAPI и PostgreSQL.

3. **Запуск API**
   После запуска контейнеров, API будет доступно по адресу:  
   `http://localhost:8000`

4. **Тестирование эндпоинтов**
   Для тестирования API используйте инструменты, такие как `curl` или Postman, чтобы отправить запросы:
   - **GET /api/repos/top100**  
     Возвращает топ 100 репозиториев.
   - **GET /api/repos/{owner}/{repo}/activity?since=2024-01-01&until=2024-12-31**  
     Возвращает активность репозитория по коммитам за указанный период.

---

### Разворачивание клауд-функции (не работает)

Клауд-функция для парсинга данных с GitHub должна быть развернута в Яндекс.Клауд. Однако в настоящий момент существуют проблемы с зависимостями, которые мешают корректному запуску функции. Попытки развертывания функции через скрипт с использованием Yandex Cloud CLI приводят к ошибкам, связанным с установкой пакетов и отсутствием необходимых зависимостей для работы в облачной среде.

---
